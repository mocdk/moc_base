<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>moc_base: lib/addendum/annotations.php Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="examples.html"><span>Examples</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_dd14fbbbdaa65b229b5565dd5e32e554.html">lib</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_60ec06c9361376d425677e09db4b8206.html">addendum</a></div>
<h1>annotations.php</h1><a href="annotations_8php.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00023"></a>00023         require_once(dirname(__FILE__).'/annotations/annotation_parser.php');
<a name="l00024"></a>00024         
<a name="l00025"></a><a class="code" href="classAnnotation.html">00025</a>         <span class="keyword">class </span><a class="code" href="classAnnotation.html">Annotation</a> {
<a name="l00026"></a><a class="code" href="classAnnotation.html#0d2c294d6d95b07f4781d86a0657d2f2">00026</a>                 <span class="keyword">public</span> <a class="code" href="classAnnotation.html#0d2c294d6d95b07f4781d86a0657d2f2">$value</a>;
<a name="l00027"></a><a class="code" href="classAnnotation.html#fad4dd730d2bb42bc4f5a964a6b2c2dc">00027</a>                 <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="classAnnotation.html#fad4dd730d2bb42bc4f5a964a6b2c2dc">$creationStack</a> = array();
<a name="l00028"></a>00028                 
<a name="l00029"></a><a class="code" href="classAnnotation.html#ab258dd009229c9ede46aa1aa81d6485">00029</a>                 <span class="keyword">public</span> <span class="keyword">final</span> function <a class="code" href="classAnnotation.html#ab258dd009229c9ede46aa1aa81d6485">__construct</a>($data = array(), $target = <span class="keyword">false</span>) {
<a name="l00030"></a>00030                         $reflection = <span class="keyword">new</span> ReflectionClass($this);
<a name="l00031"></a>00031                         $class = $reflection-&gt;getName();
<a name="l00032"></a>00032                         <span class="keywordflow">if</span>(isset(self::$creationStack[$class])) {
<a name="l00033"></a>00033                                 trigger_error(<span class="stringliteral">"Circular annotation reference on '$class'"</span>, E_USER_ERROR);
<a name="l00034"></a>00034                                 <span class="keywordflow">return</span>;
<a name="l00035"></a>00035                         }
<a name="l00036"></a>00036                         self::$creationStack[$class] = <span class="keyword">true</span>;
<a name="l00037"></a>00037                         foreach($data as $key =&gt; <a class="code" href="classAnnotation.html#0d2c294d6d95b07f4781d86a0657d2f2">$value</a>) {
<a name="l00038"></a>00038                                 <span class="keywordflow">if</span>($reflection-&gt;hasProperty($key)) {
<a name="l00039"></a>00039                                         $this-&gt;$key = <a class="code" href="classAnnotation.html#0d2c294d6d95b07f4781d86a0657d2f2">$value</a>;
<a name="l00040"></a>00040                                 } <span class="keywordflow">else</span> {
<a name="l00041"></a>00041                                         trigger_error(<span class="stringliteral">"Property '$key' not defined for annotation '$class'"</span>);
<a name="l00042"></a>00042                                 }
<a name="l00043"></a>00043                         }
<a name="l00044"></a>00044                         $this-&gt;<a class="code" href="classAnnotation.html#23e0b4b32736b9010942c58c04a8fd2d">checkTargetConstraints</a>($target);
<a name="l00045"></a>00045                         $this-&gt;<a class="code" href="classAnnotation.html#06d62a4d24e34cb05c4b486d230708e6">checkConstraints</a>($target);
<a name="l00046"></a>00046                         unset(self::$creationStack[$class]);
<a name="l00047"></a>00047                 }
<a name="l00048"></a>00048                 
<a name="l00049"></a><a class="code" href="classAnnotation.html#23e0b4b32736b9010942c58c04a8fd2d">00049</a>                 <span class="keyword">private</span> function <a class="code" href="classAnnotation.html#23e0b4b32736b9010942c58c04a8fd2d">checkTargetConstraints</a>($target) {
<a name="l00050"></a>00050                         $reflection = <span class="keyword">new</span> <a class="code" href="classReflectionAnnotatedClass.html">ReflectionAnnotatedClass</a>($this);
<a name="l00051"></a>00051                         <span class="keywordflow">if</span>($reflection-&gt;hasAnnotation('Target')) {
<a name="l00052"></a>00052                                 <a class="code" href="classAnnotation.html#0d2c294d6d95b07f4781d86a0657d2f2">$value</a> = $reflection-&gt;getAnnotation('Target')-&gt;value;
<a name="l00053"></a>00053                                 $values = is_array(<a class="code" href="classAnnotation.html#0d2c294d6d95b07f4781d86a0657d2f2">$value</a>) ? <a class="code" href="classAnnotation.html#0d2c294d6d95b07f4781d86a0657d2f2">$value</a> : array(<a class="code" href="classAnnotation.html#0d2c294d6d95b07f4781d86a0657d2f2">$value</a>);
<a name="l00054"></a>00054                                 foreach($values as <a class="code" href="classAnnotation.html#0d2c294d6d95b07f4781d86a0657d2f2">$value</a>) {
<a name="l00055"></a>00055                                         <span class="keywordflow">if</span>($value == '<span class="keyword">class</span>' &amp;&amp; $target instanceof ReflectionClass) <span class="keywordflow">return</span>;
<a name="l00056"></a>00056                                         <span class="keywordflow">if</span>($value == 'method' &amp;&amp; $target instanceof ReflectionMethod) <span class="keywordflow">return</span>;
<a name="l00057"></a>00057                                         <span class="keywordflow">if</span>($value == 'property' &amp;&amp; $target instanceof ReflectionProperty) <span class="keywordflow">return</span>;
<a name="l00058"></a>00058                                         <span class="keywordflow">if</span>($value == 'nested' &amp;&amp; $target === <span class="keyword">false</span>) <span class="keywordflow">return</span>;
<a name="l00059"></a>00059                                 }
<a name="l00060"></a>00060                                 <span class="keywordflow">if</span>($target === <span class="keyword">false</span>) {
<a name="l00061"></a>00061                                         trigger_error(<span class="stringliteral">"Annotation '"</span>.get_class($this).<span class="stringliteral">"' nesting not allowed"</span>, E_USER_ERROR);
<a name="l00062"></a>00062                                 } <span class="keywordflow">else</span> {
<a name="l00063"></a>00063                                         trigger_error(<span class="stringliteral">"Annotation '"</span>.get_class($this).<span class="stringliteral">"' not allowed on "</span>.$this-&gt;<a class="code" href="classAnnotation.html#30b6ea615cb3192a13a45378fbcfc7f0">createName</a>($target), E_USER_ERROR);
<a name="l00064"></a>00064                                 }
<a name="l00065"></a>00065                         }
<a name="l00066"></a>00066                 }
<a name="l00067"></a>00067 
<a name="l00068"></a><a class="code" href="classAnnotation.html#30b6ea615cb3192a13a45378fbcfc7f0">00068</a>                 <span class="keyword">private</span> function <a class="code" href="classAnnotation.html#30b6ea615cb3192a13a45378fbcfc7f0">createName</a>($target) {
<a name="l00069"></a>00069                         <span class="keywordflow">if</span>($target instanceof ReflectionMethod) {
<a name="l00070"></a>00070                                 <span class="keywordflow">return</span> $target-&gt;getDeclaringClass()-&gt;getName().'::'.$target-&gt;getName();
<a name="l00071"></a>00071                         } elseif($target instanceof ReflectionProperty) {
<a name="l00072"></a>00072                                 <span class="keywordflow">return</span> $target-&gt;getDeclaringClass()-&gt;getName().'::$'.$target-&gt;getName();
<a name="l00073"></a>00073                         } <span class="keywordflow">else</span> {
<a name="l00074"></a>00074                                 <span class="keywordflow">return</span> $target-&gt;getName();
<a name="l00075"></a>00075                         }
<a name="l00076"></a>00076                 }
<a name="l00077"></a>00077                 
<a name="l00078"></a><a class="code" href="classAnnotation.html#06d62a4d24e34cb05c4b486d230708e6">00078</a>                 <span class="keyword">protected</span> function <a class="code" href="classAnnotation.html#06d62a4d24e34cb05c4b486d230708e6">checkConstraints</a>($target) {}
<a name="l00079"></a>00079         }
<a name="l00080"></a>00080 
<a name="l00081"></a><a class="code" href="classAnnotationsCollection.html">00081</a>         <span class="keyword">class </span><a class="code" href="classAnnotationsCollection.html">AnnotationsCollection</a> {
<a name="l00082"></a><a class="code" href="classAnnotationsCollection.html#4478889c41895fafb4d9bc1847fe4434">00082</a>                 <span class="keyword">private</span> <a class="code" href="classAnnotationsCollection.html#4478889c41895fafb4d9bc1847fe4434">$annotations</a>;
<a name="l00083"></a>00083 
<a name="l00084"></a><a class="code" href="classAnnotationsCollection.html#2cc9f5faa80b701870506459c2dd1ea2">00084</a>                 <span class="keyword">public</span> function <a class="code" href="classAnnotationsCollection.html#2cc9f5faa80b701870506459c2dd1ea2">__construct</a>(<a class="code" href="classAnnotationsCollection.html#4478889c41895fafb4d9bc1847fe4434">$annotations</a>) {
<a name="l00085"></a>00085                         $this-&gt;annotations = <a class="code" href="classAnnotationsCollection.html#4478889c41895fafb4d9bc1847fe4434">$annotations</a>;
<a name="l00086"></a>00086                 }
<a name="l00087"></a>00087 
<a name="l00088"></a><a class="code" href="classAnnotationsCollection.html#e02d6892dc9040a0e5a8929c87ad1725">00088</a>                 <span class="keyword">public</span> function <a class="code" href="classAnnotationsCollection.html#e02d6892dc9040a0e5a8929c87ad1725">hasAnnotation</a>($class) {
<a name="l00089"></a>00089                         $class = <a class="code" href="classAddendum.html#1d1df4f9169e2f02d1242d83b4e5d094">Addendum::resolveClassName</a>($class);
<a name="l00090"></a>00090                         <span class="keywordflow">return</span> isset($this-&gt;annotations[$class]);
<a name="l00091"></a>00091                 }
<a name="l00092"></a>00092 
<a name="l00093"></a><a class="code" href="classAnnotationsCollection.html#760764fd45eadfc49a02413a07b7d0e5">00093</a>                 <span class="keyword">public</span> function <a class="code" href="classAnnotationsCollection.html#760764fd45eadfc49a02413a07b7d0e5">getAnnotation</a>($class) {
<a name="l00094"></a>00094                         $class = <a class="code" href="classAddendum.html#1d1df4f9169e2f02d1242d83b4e5d094">Addendum::resolveClassName</a>($class);
<a name="l00095"></a>00095                         <span class="keywordflow">return</span> isset($this-&gt;annotations[$class]) ? end($this-&gt;annotations[$class]) : <span class="keyword">false</span>;
<a name="l00096"></a>00096                 }
<a name="l00097"></a>00097 
<a name="l00098"></a><a class="code" href="classAnnotationsCollection.html#9d0ff21a47505c1495d262bda7365f7d">00098</a>                 <span class="keyword">public</span> function <a class="code" href="classAnnotationsCollection.html#9d0ff21a47505c1495d262bda7365f7d">getAnnotations</a>() {
<a name="l00099"></a>00099                         $result = array();
<a name="l00100"></a>00100                         foreach($this-&gt;annotations as $instances) {
<a name="l00101"></a>00101                                 $result[] = end($instances);
<a name="l00102"></a>00102                         }
<a name="l00103"></a>00103                         <span class="keywordflow">return</span> $result;
<a name="l00104"></a>00104                 }
<a name="l00105"></a>00105                 
<a name="l00106"></a><a class="code" href="classAnnotationsCollection.html#58e4a1f2d10b1cd6caf4312315ca01b6">00106</a>                 <span class="keyword">public</span> function <a class="code" href="classAnnotationsCollection.html#58e4a1f2d10b1cd6caf4312315ca01b6">getAllAnnotations</a>($restriction = <span class="keyword">false</span>) {
<a name="l00107"></a>00107                         $restriction = <a class="code" href="classAddendum.html#1d1df4f9169e2f02d1242d83b4e5d094">Addendum::resolveClassName</a>($restriction);
<a name="l00108"></a>00108                         $result = array();
<a name="l00109"></a>00109                         foreach($this-&gt;annotations as $class =&gt; $instances) {
<a name="l00110"></a>00110                                 <span class="keywordflow">if</span>(!$restriction || $restriction == $class) {
<a name="l00111"></a>00111                                         $result = array_merge($result, $instances);
<a name="l00112"></a>00112                                 }
<a name="l00113"></a>00113                         }
<a name="l00114"></a>00114                         <span class="keywordflow">return</span> $result;
<a name="l00115"></a>00115                 }
<a name="l00116"></a>00116         }
<a name="l00117"></a>00117         
<a name="l00118"></a><a class="code" href="classAnnotation__Target.html">00118</a>         <span class="keyword">class </span><a class="code" href="classAnnotation__Target.html">Annotation_Target</a> <span class="keyword">extends</span> <a class="code" href="classAnnotation.html">Annotation</a> {}
<a name="l00119"></a>00119         
<a name="l00120"></a><a class="code" href="classAnnotationsBuilder.html">00120</a>         <span class="keyword">class </span><a class="code" href="classAnnotationsBuilder.html">AnnotationsBuilder</a> {
<a name="l00121"></a><a class="code" href="classAnnotationsBuilder.html#480aa6f8bef560eca44068959d31269d">00121</a>                 <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="classAnnotationsBuilder.html#480aa6f8bef560eca44068959d31269d">$cache</a> = array();
<a name="l00122"></a>00122                 
<a name="l00123"></a><a class="code" href="classAnnotationsBuilder.html#02b83e3cc45fa140da11a4e9a2d42be2">00123</a>                 <span class="keyword">public</span> function <a class="code" href="classAnnotationsBuilder.html#02b83e3cc45fa140da11a4e9a2d42be2">build</a>($targetReflection) {
<a name="l00124"></a>00124                         $data = $this-&gt;<a class="code" href="classAnnotationsBuilder.html#3053a620149c21d5ec73207f22f96105">parse</a>($targetReflection);
<a name="l00125"></a>00125                         $annotations = array();
<a name="l00126"></a>00126                         foreach($data as $class =&gt; $parameters) {
<a name="l00127"></a>00127                                 foreach($parameters as $params) {
<a name="l00128"></a>00128                                         $annotation = $this-&gt;<a class="code" href="classAnnotationsBuilder.html#f9f34fe73c1e3fb2a6852ca4abf6347e">instantiateAnnotation</a>($class, $params, $targetReflection);
<a name="l00129"></a>00129                                         <span class="keywordflow">if</span>($annotation !== <span class="keyword">false</span>) {
<a name="l00130"></a>00130                                                 $annotations[get_class($annotation)][] = $annotation;
<a name="l00131"></a>00131                                         }
<a name="l00132"></a>00132                                 }
<a name="l00133"></a>00133                         }
<a name="l00134"></a>00134                         <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classAnnotationsCollection.html">AnnotationsCollection</a>($annotations);
<a name="l00135"></a>00135                 }
<a name="l00136"></a>00136 
<a name="l00137"></a><a class="code" href="classAnnotationsBuilder.html#f9f34fe73c1e3fb2a6852ca4abf6347e">00137</a>                 <span class="keyword">public</span> function <a class="code" href="classAnnotationsBuilder.html#f9f34fe73c1e3fb2a6852ca4abf6347e">instantiateAnnotation</a>($class, $parameters, $targetReflection = <span class="keyword">false</span>) {
<a name="l00138"></a>00138                         $class = <a class="code" href="classAddendum.html#1d1df4f9169e2f02d1242d83b4e5d094">Addendum::resolveClassName</a>($class);
<a name="l00139"></a>00139                         <span class="keywordflow">if</span>(is_subclass_of($class, '<a class="code" href="classAnnotation.html">Annotation</a>') &amp;&amp; !<a class="code" href="classAddendum.html#e4a550acf846f90bd0ff75b9fdb63555">Addendum::ignores</a>($class) || $class == '<a class="code" href="classAnnotation.html">Annotation</a>') {
<a name="l00140"></a>00140                                 $annotationReflection = <span class="keyword">new</span> ReflectionClass($class);
<a name="l00141"></a>00141                                 <span class="keywordflow">return</span> $annotationReflection-&gt;newInstance($parameters, $targetReflection);
<a name="l00142"></a>00142                         }
<a name="l00143"></a>00143                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00144"></a>00144                 }
<a name="l00145"></a>00145                 
<a name="l00146"></a><a class="code" href="classAnnotationsBuilder.html#3053a620149c21d5ec73207f22f96105">00146</a>                 <span class="keyword">private</span> function <a class="code" href="classAnnotationsBuilder.html#3053a620149c21d5ec73207f22f96105">parse</a>($reflection) {
<a name="l00147"></a>00147                         $key = $this-&gt;<a class="code" href="classAnnotationsBuilder.html#5e479a2d5800c5bab347b5294cd836d6">createName</a>($reflection);
<a name="l00148"></a>00148                         <span class="keywordflow">if</span>(!isset(self::$cache[$key])) {
<a name="l00149"></a>00149                                 $parser = <span class="keyword">new</span> <a class="code" href="classAnnotationsMatcher.html">AnnotationsMatcher</a>;
<a name="l00150"></a>00150                                 $parser-&gt;matches($this-&gt;<a class="code" href="classAnnotationsBuilder.html#6eabe1e1f29e3cc2199d06f679c446c6">getDocComment</a>($reflection), $data);
<a name="l00151"></a>00151                                 self::$cache[$key] = $data;
<a name="l00152"></a>00152                         }
<a name="l00153"></a>00153                         <span class="keywordflow">return</span> self::$cache[$key];
<a name="l00154"></a>00154                 }
<a name="l00155"></a>00155                 
<a name="l00156"></a><a class="code" href="classAnnotationsBuilder.html#5e479a2d5800c5bab347b5294cd836d6">00156</a>                 <span class="keyword">private</span> function <a class="code" href="classAnnotationsBuilder.html#5e479a2d5800c5bab347b5294cd836d6">createName</a>($target) {
<a name="l00157"></a>00157                         <span class="keywordflow">if</span>($target instanceof ReflectionMethod) {
<a name="l00158"></a>00158                                 <span class="keywordflow">return</span> $target-&gt;getDeclaringClass()-&gt;getName().'::'.$target-&gt;getName();
<a name="l00159"></a>00159                         } elseif($target instanceof ReflectionProperty) {
<a name="l00160"></a>00160                                 <span class="keywordflow">return</span> $target-&gt;getDeclaringClass()-&gt;getName().'::$'.$target-&gt;getName();
<a name="l00161"></a>00161                         } <span class="keywordflow">else</span> {
<a name="l00162"></a>00162                                 <span class="keywordflow">return</span> $target-&gt;getName();
<a name="l00163"></a>00163                         }
<a name="l00164"></a>00164                 }
<a name="l00165"></a>00165                 
<a name="l00166"></a><a class="code" href="classAnnotationsBuilder.html#6eabe1e1f29e3cc2199d06f679c446c6">00166</a>                 <span class="keyword">protected</span> function <a class="code" href="classAnnotationsBuilder.html#6eabe1e1f29e3cc2199d06f679c446c6">getDocComment</a>($reflection) {
<a name="l00167"></a>00167                         <span class="keywordflow">return</span> <a class="code" href="classAddendum.html#d6070f3659242a32b5fa977e74cd7bf8">Addendum::getDocComment</a>($reflection);
<a name="l00168"></a>00168                 }
<a name="l00169"></a>00169                 
<a name="l00170"></a><a class="code" href="classAnnotationsBuilder.html#06de0efb44c7659720bd6368508dfb63">00170</a>                 <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="classAnnotationsBuilder.html#06de0efb44c7659720bd6368508dfb63">clearCache</a>() {
<a name="l00171"></a>00171                         self::$cache = array();
<a name="l00172"></a>00172                 }
<a name="l00173"></a>00173         }
<a name="l00174"></a>00174         
<a name="l00175"></a><a class="code" href="classReflectionAnnotatedClass.html">00175</a>         <span class="keyword">class </span><a class="code" href="classReflectionAnnotatedClass.html">ReflectionAnnotatedClass</a> <span class="keyword">extends</span> ReflectionClass {
<a name="l00176"></a><a class="code" href="classReflectionAnnotatedClass.html#514d0447af9426fb37df2ff6be78eedd">00176</a>                 <span class="keyword">private</span> <a class="code" href="classReflectionAnnotatedClass.html#514d0447af9426fb37df2ff6be78eedd">$annotations</a>;
<a name="l00177"></a>00177                 
<a name="l00178"></a><a class="code" href="classReflectionAnnotatedClass.html#e5bf1270d38d628bef5ef8f5684c7c8d">00178</a>                 <span class="keyword">public</span> function <a class="code" href="classReflectionAnnotatedClass.html#e5bf1270d38d628bef5ef8f5684c7c8d">__construct</a>($class) {
<a name="l00179"></a>00179                         parent::__construct($class);
<a name="l00180"></a>00180                         $this-&gt;annotations = $this-&gt;<a class="code" href="classReflectionAnnotatedClass.html#1acbd2413eb8dd7ba317db4da7f916e6">createAnnotationBuilder</a>()-&gt;build($this);
<a name="l00181"></a>00181                 }
<a name="l00182"></a>00182                 
<a name="l00183"></a><a class="code" href="classReflectionAnnotatedClass.html#08be2d3b680b7c9edf06594fa4a9b2d4">00183</a>                 <span class="keyword">public</span> function <a class="code" href="classReflectionAnnotatedClass.html#08be2d3b680b7c9edf06594fa4a9b2d4">hasAnnotation</a>($class) {
<a name="l00184"></a>00184                         <span class="keywordflow">return</span> $this-&gt;annotations-&gt;hasAnnotation($class);
<a name="l00185"></a>00185                 }
<a name="l00186"></a>00186                 
<a name="l00187"></a><a class="code" href="classReflectionAnnotatedClass.html#bf7eec238ebfb376f3b70764081cb4be">00187</a>                 <span class="keyword">public</span> function <a class="code" href="classReflectionAnnotatedClass.html#bf7eec238ebfb376f3b70764081cb4be">getAnnotation</a>($annotation) {
<a name="l00188"></a>00188                         <span class="keywordflow">return</span> $this-&gt;annotations-&gt;getAnnotation($annotation);
<a name="l00189"></a>00189                 }
<a name="l00190"></a>00190                 
<a name="l00191"></a><a class="code" href="classReflectionAnnotatedClass.html#297f9dd18ea1e4f1e3e13bbb208f8fa9">00191</a>                 <span class="keyword">public</span> function <a class="code" href="classReflectionAnnotatedClass.html#297f9dd18ea1e4f1e3e13bbb208f8fa9">getAnnotations</a>() {
<a name="l00192"></a>00192                         <span class="keywordflow">return</span> $this-&gt;annotations-&gt;getAnnotations();
<a name="l00193"></a>00193                 }
<a name="l00194"></a>00194                 
<a name="l00195"></a><a class="code" href="classReflectionAnnotatedClass.html#9d6f3618eb268d841ed531ebca2cc2aa">00195</a>                 <span class="keyword">public</span> function <a class="code" href="classReflectionAnnotatedClass.html#9d6f3618eb268d841ed531ebca2cc2aa">getAllAnnotations</a>($restriction = <span class="keyword">false</span>) {
<a name="l00196"></a>00196                         <span class="keywordflow">return</span> $this-&gt;annotations-&gt;getAllAnnotations($restriction);
<a name="l00197"></a>00197                 }
<a name="l00198"></a>00198                 
<a name="l00199"></a><a class="code" href="classReflectionAnnotatedClass.html#eda941a08d9aab5b39b8e15a81c28efa">00199</a>                 <span class="keyword">public</span> function <a class="code" href="classReflectionAnnotatedClass.html#eda941a08d9aab5b39b8e15a81c28efa">getConstructor</a>() {
<a name="l00200"></a>00200                         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classReflectionAnnotatedClass.html#534cfd15ddbfead8bee812e2f2e0927d">createReflectionAnnotatedMethod</a>(parent::getConstructor());
<a name="l00201"></a>00201                 }
<a name="l00202"></a>00202                 
<a name="l00203"></a><a class="code" href="classReflectionAnnotatedClass.html#9163fa75c915c43a090aa416e491e70e">00203</a>                 <span class="keyword">public</span> function <a class="code" href="classReflectionAnnotatedClass.html#9163fa75c915c43a090aa416e491e70e">getMethod</a>($name) {
<a name="l00204"></a>00204                         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classReflectionAnnotatedClass.html#534cfd15ddbfead8bee812e2f2e0927d">createReflectionAnnotatedMethod</a>(parent::getMethod($name));
<a name="l00205"></a>00205                 }
<a name="l00206"></a>00206                 
<a name="l00207"></a><a class="code" href="classReflectionAnnotatedClass.html#7be24de337d04858d89a7e2e1562b1f9">00207</a>                 <span class="keyword">public</span> function <a class="code" href="classReflectionAnnotatedClass.html#7be24de337d04858d89a7e2e1562b1f9">getMethods</a>($filter = -1) {
<a name="l00208"></a>00208                         $result = array();
<a name="l00209"></a>00209                         foreach(parent::getMethods($filter) as $method) {
<a name="l00210"></a>00210                                 $result[] = $this-&gt;<a class="code" href="classReflectionAnnotatedClass.html#534cfd15ddbfead8bee812e2f2e0927d">createReflectionAnnotatedMethod</a>($method);
<a name="l00211"></a>00211                         }
<a name="l00212"></a>00212                         <span class="keywordflow">return</span> $result;
<a name="l00213"></a>00213                 }
<a name="l00214"></a>00214                 
<a name="l00215"></a><a class="code" href="classReflectionAnnotatedClass.html#d8c57f83f487cb8f962f3b5c4b5401a4">00215</a>                 <span class="keyword">public</span> function <a class="code" href="classReflectionAnnotatedClass.html#d8c57f83f487cb8f962f3b5c4b5401a4">getProperty</a>($name) {
<a name="l00216"></a>00216                         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classReflectionAnnotatedClass.html#87545ff61d2813570383c60894a9ea03">createReflectionAnnotatedProperty</a>(parent::getProperty($name));
<a name="l00217"></a>00217                 }
<a name="l00218"></a>00218                 
<a name="l00219"></a><a class="code" href="classReflectionAnnotatedClass.html#6574979974d24af1a6bf5f3072a11cf4">00219</a>                 <span class="keyword">public</span> function <a class="code" href="classReflectionAnnotatedClass.html#6574979974d24af1a6bf5f3072a11cf4">getProperties</a>($filter = -1) {
<a name="l00220"></a>00220                         $result = array();
<a name="l00221"></a>00221                         foreach(parent::getProperties($filter) as $property) {
<a name="l00222"></a>00222                                 $result[] = $this-&gt;<a class="code" href="classReflectionAnnotatedClass.html#87545ff61d2813570383c60894a9ea03">createReflectionAnnotatedProperty</a>($property);
<a name="l00223"></a>00223                         }
<a name="l00224"></a>00224                         <span class="keywordflow">return</span> $result;
<a name="l00225"></a>00225                 }
<a name="l00226"></a>00226                 
<a name="l00227"></a><a class="code" href="classReflectionAnnotatedClass.html#139344b2fbecba8f6b23c5400cbb0d5b">00227</a>                 <span class="keyword">public</span> function <a class="code" href="classReflectionAnnotatedClass.html#139344b2fbecba8f6b23c5400cbb0d5b">getInterfaces</a>() {
<a name="l00228"></a>00228                         $result = array();
<a name="l00229"></a>00229                         foreach(parent::getInterfaces() as $interface) {
<a name="l00230"></a>00230                                 $result[] = $this-&gt;<a class="code" href="classReflectionAnnotatedClass.html#3189b51be1fb1fe0b391e5a50019cc3e">createReflectionAnnotatedClass</a>($interface);
<a name="l00231"></a>00231                         }
<a name="l00232"></a>00232                         <span class="keywordflow">return</span> $result;
<a name="l00233"></a>00233                 }
<a name="l00234"></a>00234                 
<a name="l00235"></a><a class="code" href="classReflectionAnnotatedClass.html#74b2c9e9901da5a095a6d964f7d1e54d">00235</a>                 <span class="keyword">public</span> function <a class="code" href="classReflectionAnnotatedClass.html#74b2c9e9901da5a095a6d964f7d1e54d">getParentClass</a>() {
<a name="l00236"></a>00236                         $class = parent::getParentClass();
<a name="l00237"></a>00237                         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classReflectionAnnotatedClass.html#3189b51be1fb1fe0b391e5a50019cc3e">createReflectionAnnotatedClass</a>($class);
<a name="l00238"></a>00238                 }
<a name="l00239"></a>00239                 
<a name="l00240"></a><a class="code" href="classReflectionAnnotatedClass.html#1acbd2413eb8dd7ba317db4da7f916e6">00240</a>                 <span class="keyword">protected</span> function <a class="code" href="classReflectionAnnotatedClass.html#1acbd2413eb8dd7ba317db4da7f916e6">createAnnotationBuilder</a>() {
<a name="l00241"></a>00241                         <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classAnnotationsBuilder.html">AnnotationsBuilder</a>();
<a name="l00242"></a>00242                 }
<a name="l00243"></a>00243                 
<a name="l00244"></a><a class="code" href="classReflectionAnnotatedClass.html#3189b51be1fb1fe0b391e5a50019cc3e">00244</a>                 <span class="keyword">private</span> function <a class="code" href="classReflectionAnnotatedClass.html#3189b51be1fb1fe0b391e5a50019cc3e">createReflectionAnnotatedClass</a>($class) {
<a name="l00245"></a>00245                         <span class="keywordflow">return</span> ($class !== <span class="keyword">false</span>) ? <span class="keyword">new</span> <a class="code" href="classReflectionAnnotatedClass.html">ReflectionAnnotatedClass</a>($class-&gt;getName()) : <span class="keyword">false</span>;
<a name="l00246"></a>00246                 }
<a name="l00247"></a>00247                 
<a name="l00248"></a><a class="code" href="classReflectionAnnotatedClass.html#534cfd15ddbfead8bee812e2f2e0927d">00248</a>                 <span class="keyword">private</span> function <a class="code" href="classReflectionAnnotatedClass.html#534cfd15ddbfead8bee812e2f2e0927d">createReflectionAnnotatedMethod</a>($method) {
<a name="l00249"></a>00249                         <span class="keywordflow">return</span> ($method !== null) ? <span class="keyword">new</span> <a class="code" href="classReflectionAnnotatedMethod.html">ReflectionAnnotatedMethod</a>($this-&gt;getName(), $method-&gt;getName()) : null;
<a name="l00250"></a>00250                 }
<a name="l00251"></a>00251                 
<a name="l00252"></a><a class="code" href="classReflectionAnnotatedClass.html#87545ff61d2813570383c60894a9ea03">00252</a>                 <span class="keyword">private</span> function <a class="code" href="classReflectionAnnotatedClass.html#87545ff61d2813570383c60894a9ea03">createReflectionAnnotatedProperty</a>($property) {
<a name="l00253"></a>00253                         <span class="keywordflow">return</span> ($property !== null) ? <span class="keyword">new</span> <a class="code" href="classReflectionAnnotatedProperty.html">ReflectionAnnotatedProperty</a>($this-&gt;getName(), $property-&gt;getName()) : null;
<a name="l00254"></a>00254                 }
<a name="l00255"></a>00255         }
<a name="l00256"></a>00256         
<a name="l00257"></a><a class="code" href="classReflectionAnnotatedMethod.html">00257</a>         <span class="keyword">class </span><a class="code" href="classReflectionAnnotatedMethod.html">ReflectionAnnotatedMethod</a> <span class="keyword">extends</span> ReflectionMethod {
<a name="l00258"></a><a class="code" href="classReflectionAnnotatedMethod.html#7eea8d6b44d8305b730ed78c01b56914">00258</a>                 <span class="keyword">private</span> <a class="code" href="classReflectionAnnotatedMethod.html#7eea8d6b44d8305b730ed78c01b56914">$annotations</a>;
<a name="l00259"></a>00259                 
<a name="l00260"></a><a class="code" href="classReflectionAnnotatedMethod.html#b63b7e54e55ff5762e1890ee92db489f">00260</a>                 <span class="keyword">public</span> function <a class="code" href="classReflectionAnnotatedMethod.html#b63b7e54e55ff5762e1890ee92db489f">__construct</a>($class, $name) {
<a name="l00261"></a>00261                         parent::__construct($class, $name);
<a name="l00262"></a>00262                         $this-&gt;annotations = $this-&gt;<a class="code" href="classReflectionAnnotatedMethod.html#e69f54136872744c9f22ec41998a1efb">createAnnotationBuilder</a>()-&gt;build($this);
<a name="l00263"></a>00263                 }
<a name="l00264"></a>00264                 
<a name="l00265"></a><a class="code" href="classReflectionAnnotatedMethod.html#936f86e7bafa2cbf8f7bc7f8ea124000">00265</a>                 <span class="keyword">public</span> function <a class="code" href="classReflectionAnnotatedMethod.html#936f86e7bafa2cbf8f7bc7f8ea124000">hasAnnotation</a>($class) {
<a name="l00266"></a>00266                         <span class="keywordflow">return</span> $this-&gt;annotations-&gt;hasAnnotation($class);
<a name="l00267"></a>00267                 }
<a name="l00268"></a>00268                 
<a name="l00269"></a><a class="code" href="classReflectionAnnotatedMethod.html#558648628098189278422008da0fa9a4">00269</a>                 <span class="keyword">public</span> function <a class="code" href="classReflectionAnnotatedMethod.html#558648628098189278422008da0fa9a4">getAnnotation</a>($annotation) {
<a name="l00270"></a>00270                         <span class="keywordflow">return</span> $this-&gt;annotations-&gt;getAnnotation($annotation);
<a name="l00271"></a>00271                 }
<a name="l00272"></a>00272                 
<a name="l00273"></a><a class="code" href="classReflectionAnnotatedMethod.html#59e0b6a5aa59b4ce1bfa580eb1685a32">00273</a>                 <span class="keyword">public</span> function <a class="code" href="classReflectionAnnotatedMethod.html#59e0b6a5aa59b4ce1bfa580eb1685a32">getAnnotations</a>() {
<a name="l00274"></a>00274                         <span class="keywordflow">return</span> $this-&gt;annotations-&gt;getAnnotations();
<a name="l00275"></a>00275                 }
<a name="l00276"></a>00276                 
<a name="l00277"></a><a class="code" href="classReflectionAnnotatedMethod.html#86d8e71acc151e904b14d395bff352b9">00277</a>                 <span class="keyword">public</span> function <a class="code" href="classReflectionAnnotatedMethod.html#86d8e71acc151e904b14d395bff352b9">getAllAnnotations</a>($restriction = <span class="keyword">false</span>) {
<a name="l00278"></a>00278                         <span class="keywordflow">return</span> $this-&gt;annotations-&gt;getAllAnnotations($restriction);
<a name="l00279"></a>00279                 }
<a name="l00280"></a>00280                 
<a name="l00281"></a><a class="code" href="classReflectionAnnotatedMethod.html#af62957f70a8ec461e787d104240f887">00281</a>                 <span class="keyword">public</span> function <a class="code" href="classReflectionAnnotatedMethod.html#af62957f70a8ec461e787d104240f887">getDeclaringClass</a>() {
<a name="l00282"></a>00282                         $class = parent::getDeclaringClass();
<a name="l00283"></a>00283                         <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classReflectionAnnotatedClass.html">ReflectionAnnotatedClass</a>($class-&gt;getName());
<a name="l00284"></a>00284                 }
<a name="l00285"></a>00285                 
<a name="l00286"></a><a class="code" href="classReflectionAnnotatedMethod.html#e69f54136872744c9f22ec41998a1efb">00286</a>                 <span class="keyword">protected</span> function <a class="code" href="classReflectionAnnotatedMethod.html#e69f54136872744c9f22ec41998a1efb">createAnnotationBuilder</a>() {
<a name="l00287"></a>00287                         <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classAnnotationsBuilder.html">AnnotationsBuilder</a>();
<a name="l00288"></a>00288                 }
<a name="l00289"></a>00289         }
<a name="l00290"></a>00290         
<a name="l00291"></a><a class="code" href="classReflectionAnnotatedProperty.html">00291</a>         <span class="keyword">class </span><a class="code" href="classReflectionAnnotatedProperty.html">ReflectionAnnotatedProperty</a> <span class="keyword">extends</span> ReflectionProperty {
<a name="l00292"></a><a class="code" href="classReflectionAnnotatedProperty.html#0c45cc94cd75152ff007c170903539f8">00292</a>                 <span class="keyword">private</span> <a class="code" href="classReflectionAnnotatedProperty.html#0c45cc94cd75152ff007c170903539f8">$annotations</a>;
<a name="l00293"></a>00293                 
<a name="l00294"></a><a class="code" href="classReflectionAnnotatedProperty.html#2e4a6863a894a4b095b43a7cbfd74266">00294</a>                 <span class="keyword">public</span> function <a class="code" href="classReflectionAnnotatedProperty.html#2e4a6863a894a4b095b43a7cbfd74266">__construct</a>($class, $name) {
<a name="l00295"></a>00295                         parent::__construct($class, $name);
<a name="l00296"></a>00296                         $this-&gt;annotations = $this-&gt;<a class="code" href="classReflectionAnnotatedProperty.html#f31d67343f5fef6878c1aade45aba97d">createAnnotationBuilder</a>()-&gt;build($this);
<a name="l00297"></a>00297                 }
<a name="l00298"></a>00298                 
<a name="l00299"></a><a class="code" href="classReflectionAnnotatedProperty.html#f9e02493c6fb2320e080024f25d05d49">00299</a>                 <span class="keyword">public</span> function <a class="code" href="classReflectionAnnotatedProperty.html#f9e02493c6fb2320e080024f25d05d49">hasAnnotation</a>($class) {
<a name="l00300"></a>00300                         <span class="keywordflow">return</span> $this-&gt;annotations-&gt;hasAnnotation($class);
<a name="l00301"></a>00301                 }
<a name="l00302"></a>00302                 
<a name="l00303"></a><a class="code" href="classReflectionAnnotatedProperty.html#aae0395b8cb6defc77b2fef0bcf57c8f">00303</a>                 <span class="keyword">public</span> function <a class="code" href="classReflectionAnnotatedProperty.html#aae0395b8cb6defc77b2fef0bcf57c8f">getAnnotation</a>($annotation) {
<a name="l00304"></a>00304                         <span class="keywordflow">return</span> $this-&gt;annotations-&gt;getAnnotation($annotation);
<a name="l00305"></a>00305                 }
<a name="l00306"></a>00306                 
<a name="l00307"></a><a class="code" href="classReflectionAnnotatedProperty.html#be325ffb4447ff91706917ed3172849b">00307</a>                 <span class="keyword">public</span> function <a class="code" href="classReflectionAnnotatedProperty.html#be325ffb4447ff91706917ed3172849b">getAnnotations</a>() {
<a name="l00308"></a>00308                         <span class="keywordflow">return</span> $this-&gt;annotations-&gt;getAnnotations();
<a name="l00309"></a>00309                 }
<a name="l00310"></a>00310                 
<a name="l00311"></a><a class="code" href="classReflectionAnnotatedProperty.html#73032f26f8dedfc0f56a61744088e912">00311</a>                 <span class="keyword">public</span> function <a class="code" href="classReflectionAnnotatedProperty.html#73032f26f8dedfc0f56a61744088e912">getAllAnnotations</a>($restriction = <span class="keyword">false</span>) {
<a name="l00312"></a>00312                         <span class="keywordflow">return</span> $this-&gt;annotations-&gt;getAllAnnotations($restriction);
<a name="l00313"></a>00313                 }
<a name="l00314"></a>00314                 
<a name="l00315"></a><a class="code" href="classReflectionAnnotatedProperty.html#33ba897c66b3e33b55cf1574dbfefd9f">00315</a>                 <span class="keyword">public</span> function <a class="code" href="classReflectionAnnotatedProperty.html#33ba897c66b3e33b55cf1574dbfefd9f">getDeclaringClass</a>() {
<a name="l00316"></a>00316                         $class = parent::getDeclaringClass();
<a name="l00317"></a>00317                         <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classReflectionAnnotatedClass.html">ReflectionAnnotatedClass</a>($class-&gt;getName());
<a name="l00318"></a>00318                 }
<a name="l00319"></a>00319                 
<a name="l00320"></a><a class="code" href="classReflectionAnnotatedProperty.html#f31d67343f5fef6878c1aade45aba97d">00320</a>                 <span class="keyword">protected</span> function <a class="code" href="classReflectionAnnotatedProperty.html#f31d67343f5fef6878c1aade45aba97d">createAnnotationBuilder</a>() {
<a name="l00321"></a>00321                         <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classAnnotationsBuilder.html">AnnotationsBuilder</a>();
<a name="l00322"></a>00322                 }
<a name="l00323"></a>00323         }
<a name="l00324"></a>00324         
<a name="l00325"></a><a class="code" href="classAddendum.html">00325</a>         <span class="keyword">class </span><a class="code" href="classAddendum.html">Addendum</a> {
<a name="l00326"></a><a class="code" href="classAddendum.html#2f0db025f4283b3b03e738452cbe89cd">00326</a>                 <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="classAddendum.html#2f0db025f4283b3b03e738452cbe89cd">$rawMode</a>;
<a name="l00327"></a><a class="code" href="classAddendum.html#c12ea0379db99ac5efa9036f985b7dce">00327</a>                 <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="classAddendum.html#c12ea0379db99ac5efa9036f985b7dce">$ignore</a>;
<a name="l00328"></a><a class="code" href="classAddendum.html#6e5b146b967f63d77d2282e414c4fc13">00328</a>                 <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="classAddendum.html#6e5b146b967f63d77d2282e414c4fc13">$classnames</a> = array();
<a name="l00329"></a><a class="code" href="classAddendum.html#6bf5187e1a593c1f4a632cca7a26e405">00329</a>                 <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="classAddendum.html#6bf5187e1a593c1f4a632cca7a26e405">$annotations</a> = <span class="keyword">false</span>;
<a name="l00330"></a>00330                 
<a name="l00331"></a><a class="code" href="classAddendum.html#d6070f3659242a32b5fa977e74cd7bf8">00331</a>                 <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="classAddendum.html#d6070f3659242a32b5fa977e74cd7bf8">getDocComment</a>($reflection) {
<a name="l00332"></a>00332                         <span class="keywordflow">if</span>(self::checkRawDocCommentParsingNeeded()) {
<a name="l00333"></a>00333                                 $docComment = <span class="keyword">new</span> <a class="code" href="classDocComment.html">DocComment</a>();
<a name="l00334"></a>00334                                 <span class="keywordflow">return</span> $docComment-&gt;get($reflection);
<a name="l00335"></a>00335                         } <span class="keywordflow">else</span> {
<a name="l00336"></a>00336                                 <span class="keywordflow">return</span> $reflection-&gt;getDocComment();
<a name="l00337"></a>00337                         }
<a name="l00338"></a>00338                 }
<a name="l00339"></a>00339                 
<a name="l00341"></a><a class="code" href="classAddendum.html#01291df6209414d74ed4fe31ea9dc205">00341</a>                 <span class="keyword">private</span> <span class="keyword">static</span> function <a class="code" href="classAddendum.html#01291df6209414d74ed4fe31ea9dc205">checkRawDocCommentParsingNeeded</a>() {
<a name="l00342"></a>00342                         <span class="keywordflow">if</span>(self::$rawMode === null) {
<a name="l00343"></a>00343                                 $reflection = <span class="keyword">new</span> ReflectionClass('<a class="code" href="classAddendum.html">Addendum</a>');
<a name="l00344"></a>00344                                 $method = $reflection-&gt;getMethod('<a class="code" href="classAddendum.html#01291df6209414d74ed4fe31ea9dc205">checkRawDocCommentParsingNeeded</a>');
<a name="l00345"></a>00345                                 self::setRawMode($method-&gt;<a class="code" href="classAddendum.html#d6070f3659242a32b5fa977e74cd7bf8">getDocComment</a>() === <span class="keyword">false</span>);
<a name="l00346"></a>00346                         }
<a name="l00347"></a>00347                         <span class="keywordflow">return</span> self::$rawMode;
<a name="l00348"></a>00348                 }
<a name="l00349"></a>00349                 
<a name="l00350"></a><a class="code" href="classAddendum.html#96ffc0262402a18baaf6b9381b2d9ab6">00350</a>                 <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="classAddendum.html#96ffc0262402a18baaf6b9381b2d9ab6">setRawMode</a>($enabled = <span class="keyword">true</span>) {
<a name="l00351"></a>00351                         <span class="keywordflow">if</span>($enabled) {
<a name="l00352"></a>00352                                 require_once(dirname(__FILE__).'/annotations/doc_comment.php');
<a name="l00353"></a>00353                         }
<a name="l00354"></a>00354                         self::$rawMode = $enabled;
<a name="l00355"></a>00355                 }
<a name="l00356"></a>00356                 
<a name="l00357"></a><a class="code" href="classAddendum.html#3c8fea90beb67ff05cbd8e990777c251">00357</a>                 <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="classAddendum.html#3c8fea90beb67ff05cbd8e990777c251">resetIgnoredAnnotations</a>() {
<a name="l00358"></a>00358                         self::$ignore = array();
<a name="l00359"></a>00359                 }
<a name="l00360"></a>00360                 
<a name="l00361"></a><a class="code" href="classAddendum.html#e4a550acf846f90bd0ff75b9fdb63555">00361</a>                 <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="classAddendum.html#e4a550acf846f90bd0ff75b9fdb63555">ignores</a>($class) {
<a name="l00362"></a>00362                         <span class="keywordflow">return</span> isset(self::$ignore[$class]);
<a name="l00363"></a>00363                 }
<a name="l00364"></a>00364                 
<a name="l00365"></a><a class="code" href="classAddendum.html#6e4bd5dfc5ac7ac3bc19b5eccf61ad84">00365</a>                 <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="classAddendum.html#6e4bd5dfc5ac7ac3bc19b5eccf61ad84">ignore</a>() {
<a name="l00366"></a>00366                         foreach(func_get_args() as $class) {
<a name="l00367"></a>00367                                 self::$ignore[$class] = <span class="keyword">true</span>;
<a name="l00368"></a>00368                         }
<a name="l00369"></a>00369                 }
<a name="l00370"></a>00370 
<a name="l00371"></a><a class="code" href="classAddendum.html#1d1df4f9169e2f02d1242d83b4e5d094">00371</a>                 <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="classAddendum.html#1d1df4f9169e2f02d1242d83b4e5d094">resolveClassName</a>($class) {
<a name="l00372"></a>00372                         <span class="keywordflow">if</span>(isset(self::$classnames[$class])) <span class="keywordflow">return</span> self::$classnames[$class];
<a name="l00373"></a>00373                         $matching = array();
<a name="l00374"></a>00374                         foreach(self::getDeclaredAnnotations() as $declared) {
<a name="l00375"></a>00375                                 <span class="keywordflow">if</span>($declared == $class) {
<a name="l00376"></a>00376                                         $matching[] = $declared;
<a name="l00377"></a>00377                                 } <span class="keywordflow">else</span> {
<a name="l00378"></a>00378                                         $pos = strrpos($declared, <span class="stringliteral">"_$class"</span>);
<a name="l00379"></a>00379                                         <span class="keywordflow">if</span>($pos !== <span class="keyword">false</span> &amp;&amp; ($pos + strlen($class) == strlen($declared) - 1)) {
<a name="l00380"></a>00380                                                 $matching[] = $declared;
<a name="l00381"></a>00381                                         }
<a name="l00382"></a>00382                                 }
<a name="l00383"></a>00383                         }
<a name="l00384"></a>00384                         $result = null;
<a name="l00385"></a>00385                         <span class="keywordflow">switch</span>(count($matching)) {
<a name="l00386"></a>00386                                 <span class="keywordflow">case</span> 0: $result = $class; <span class="keywordflow">break</span>;
<a name="l00387"></a>00387                                 <span class="keywordflow">case</span> 1: $result = $matching[0]; <span class="keywordflow">break</span>;
<a name="l00388"></a>00388                                 <span class="keywordflow">default</span>: trigger_error(<span class="stringliteral">"Cannot resolve class name for '$class'. Possible matches: "</span> . join(', ', $matching), E_USER_ERROR);
<a name="l00389"></a>00389                         }
<a name="l00390"></a>00390                         self::$classnames[$class] = $result;
<a name="l00391"></a>00391                         <span class="keywordflow">return</span> $result;
<a name="l00392"></a>00392                 }
<a name="l00393"></a>00393 
<a name="l00394"></a><a class="code" href="classAddendum.html#a8c68acc5b4586a7105bc093fde0c430">00394</a>                 <span class="keyword">private</span> <span class="keyword">static</span> function <a class="code" href="classAddendum.html#a8c68acc5b4586a7105bc093fde0c430">getDeclaredAnnotations</a>() {
<a name="l00395"></a>00395                         <span class="keywordflow">if</span>(!self::$annotations) {
<a name="l00396"></a>00396                                 self::$annotations = array();
<a name="l00397"></a>00397                                 foreach(get_declared_classes() as $class) {
<a name="l00398"></a>00398                                         <span class="keywordflow">if</span>(is_subclass_of($class, '<a class="code" href="classAnnotation.html">Annotation</a>') || $class == '<a class="code" href="classAnnotation.html">Annotation</a>') self::$annotations[] = $class;
<a name="l00399"></a>00399                                 }
<a name="l00400"></a>00400                         }
<a name="l00401"></a>00401                         <span class="keywordflow">return</span> self::$annotations;
<a name="l00402"></a>00402                 }
<a name="l00403"></a>00403 
<a name="l00404"></a>00404                 
<a name="l00405"></a>00405         }
<a name="l00406"></a>00406 ?&gt;
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Jan 21 14:53:12 2010 for moc_base by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
