<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>moc_base: lib/MOC/Inflector.php Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="examples.html"><span>Examples</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_dd14fbbbdaa65b229b5565dd5e32e554.html">lib</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_a31528689d76d5b04db586865b43700e.html">MOC</a></div>
<h1>Inflector.php</h1><a href="Inflector_8php.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00011"></a><a class="code" href="classMOC__Inflector.html">00011</a> <span class="keyword">class </span><a class="code" href="classMOC__Inflector.html">MOC_Inflector</a> {
<a name="l00012"></a>00012  
<a name="l00019"></a><a class="code" href="classMOC__Inflector.html#631539ff77f93bb6f21e6c5fd2b6239f">00019</a>         <span class="keyword">protected</span> <span class="keyword">static</span> <a class="code" href="classMOC__Inflector.html#631539ff77f93bb6f21e6c5fd2b6239f">$_plural</a> = array(
<a name="l00020"></a>00020                 '<a class="code" href="classMOC__Inflector.html#d1db8ac1841872b873e1366225adee69">rules</a>' =&gt; array(
<a name="l00021"></a>00021                         '/(s)tatus$/i' =&gt; '\1\2tatuses',
<a name="l00022"></a>00022                         '/(quiz)$/i' =&gt; '\1zes',
<a name="l00023"></a>00023                         '/^(ox)$/i' =&gt; '\1\2en',
<a name="l00024"></a>00024                         '/([m|l])ouse$/i' =&gt; '\1ice',
<a name="l00025"></a>00025                         '/(matr|vert|ind)(ix|ex)$/i'  =&gt; '\1ices',
<a name="l00026"></a>00026                         '/(x|ch|ss|sh)$/i' =&gt; '\1es',
<a name="l00027"></a>00027                         '/([^aeiouy]|qu)y$/i' =&gt; '\1ies',
<a name="l00028"></a>00028                         '/(hive)$/i' =&gt; '\1s',
<a name="l00029"></a>00029                         '/(?:([^f])fe|([lr])f)$/i' =&gt; '\1\2ves',
<a name="l00030"></a>00030                         '/sis$/i' =&gt; 'ses',
<a name="l00031"></a>00031                         '/([ti])um$/i' =&gt; '\1a',
<a name="l00032"></a>00032                         '/(p)erson$/i' =&gt; '\1eople',
<a name="l00033"></a>00033                         '/(m)an$/i' =&gt; '\1en',
<a name="l00034"></a>00034                         '/(c)hild$/i' =&gt; '\1hildren',
<a name="l00035"></a>00035                         '/(buffal|tomat)o$/i' =&gt; '\1\2oes',
<a name="l00036"></a>00036                         '/(alumn|bacill|cact|foc|fung|nucle|radi|stimul|syllab|termin|vir)us$/i' =&gt; '\1i',
<a name="l00037"></a>00037                         '/us$/' =&gt; 'uses',
<a name="l00038"></a>00038                         '/(alias)$/i' =&gt; '\1es',
<a name="l00039"></a>00039                         '/(ax|cris|test)is$/i' =&gt; '\1es',
<a name="l00040"></a>00040                         '/s$/' =&gt; <span class="charliteral">'s'</span>,
<a name="l00041"></a>00041                         '/^$/' =&gt; '',
<a name="l00042"></a>00042                         '/$/' =&gt; <span class="charliteral">'s'</span>,
<a name="l00043"></a>00043                 ),
<a name="l00044"></a>00044                 'uninflected' =&gt; array(
<a name="l00045"></a>00045                         '.*[nrlm]ese', '.*deer', '.*fish', '.*measles', '.*ois', '.*pox', '.*sheep', 'people'
<a name="l00046"></a>00046                 ),
<a name="l00047"></a>00047                 'irregular' =&gt; array(
<a name="l00048"></a>00048                         'atlas' =&gt; 'atlases',
<a name="l00049"></a>00049                         'beef' =&gt; 'beefs',
<a name="l00050"></a>00050                         'brother' =&gt; 'brothers',
<a name="l00051"></a>00051                         'child' =&gt; 'children',
<a name="l00052"></a>00052                         'corpus' =&gt; 'corpuses',
<a name="l00053"></a>00053                         'cow' =&gt; 'cows',
<a name="l00054"></a>00054                         'ganglion' =&gt; 'ganglions',
<a name="l00055"></a>00055                         'genie' =&gt; 'genies',
<a name="l00056"></a>00056                         'genus' =&gt; 'genera',
<a name="l00057"></a>00057                         'graffito' =&gt; 'graffiti',
<a name="l00058"></a>00058                         'hoof' =&gt; 'hoofs',
<a name="l00059"></a>00059                         'loaf' =&gt; 'loaves',
<a name="l00060"></a>00060                         'man' =&gt; 'men',
<a name="l00061"></a>00061                         'money' =&gt; 'monies',
<a name="l00062"></a>00062                         'mongoose' =&gt; 'mongooses',
<a name="l00063"></a>00063                         'move' =&gt; 'moves',
<a name="l00064"></a>00064                         'mythos' =&gt; 'mythoi',
<a name="l00065"></a>00065                         'niche' =&gt; 'niches',
<a name="l00066"></a>00066                         'numen' =&gt; 'numina',
<a name="l00067"></a>00067                         'occiput' =&gt; 'occiputs',
<a name="l00068"></a>00068                         'octopus' =&gt; 'octopuses',
<a name="l00069"></a>00069                         'opus' =&gt; 'opuses',
<a name="l00070"></a>00070                         'ox' =&gt; 'oxen',
<a name="l00071"></a>00071                         'penis' =&gt; 'penises',
<a name="l00072"></a>00072                         'person' =&gt; 'people',
<a name="l00073"></a>00073                         'sex' =&gt; 'sexes',
<a name="l00074"></a>00074                         'soliloquy' =&gt; 'soliloquies',
<a name="l00075"></a>00075                         'testis' =&gt; 'testes',
<a name="l00076"></a>00076                         'trilby' =&gt; 'trilbys',
<a name="l00077"></a>00077                         'turf' =&gt; 'turfs'
<a name="l00078"></a>00078                 )
<a name="l00079"></a>00079         );
<a name="l00080"></a>00080  
<a name="l00087"></a><a class="code" href="classMOC__Inflector.html#75aeb63524a845175e54c0c03a5d5a58">00087</a>         <span class="keyword">protected</span> <span class="keyword">static</span> <a class="code" href="classMOC__Inflector.html#75aeb63524a845175e54c0c03a5d5a58">$_singular</a> = array(
<a name="l00088"></a>00088                 '<a class="code" href="classMOC__Inflector.html#d1db8ac1841872b873e1366225adee69">rules</a>' =&gt; array(
<a name="l00089"></a>00089                         '/(s)tatuses$/i' =&gt; '\1\2tatus',
<a name="l00090"></a>00090                         '/^(.*)(menu)s$/i' =&gt; '\1\2',
<a name="l00091"></a>00091                         '/(quiz)zes$/i' =&gt; '\\1',
<a name="l00092"></a>00092                         '/(matr)ices$/i' =&gt; '\1ix',
<a name="l00093"></a>00093                         '/(vert|ind)ices$/i' =&gt; '\1ex',
<a name="l00094"></a>00094                         '/^(ox)en/i' =&gt; <span class="charliteral">'\1'</span>,
<a name="l00095"></a>00095                         '/(alias)(es)*$/i' =&gt; <span class="charliteral">'\1'</span>,
<a name="l00096"></a>00096                         '/(alumn|bacill|cact|foc|fung|nucle|radi|stimul|syllab|termin|viri?)i$/i' =&gt; '\1us',
<a name="l00097"></a>00097                         '/([ftw]ax)es/i' =&gt; <span class="charliteral">'\1'</span>,
<a name="l00098"></a>00098                         '/(cris|ax|test)es$/i' =&gt; '\1is',
<a name="l00099"></a>00099                         '/(shoe|slave)s$/i' =&gt; <span class="charliteral">'\1'</span>,
<a name="l00100"></a>00100                         '/(o)es$/i' =&gt; <span class="charliteral">'\1'</span>,
<a name="l00101"></a>00101                         '/ouses$/' =&gt; 'ouse',
<a name="l00102"></a>00102                         '/uses$/' =&gt; 'us',
<a name="l00103"></a>00103                         '/([m|l])ice$/i' =&gt; '\1ouse',
<a name="l00104"></a>00104                         '/(x|ch|ss|sh)es$/i' =&gt; <span class="charliteral">'\1'</span>,
<a name="l00105"></a>00105                         '/(m)ovies$/i' =&gt; '\1\2ovie',
<a name="l00106"></a>00106                         '/(s)eries$/i' =&gt; '\1\2eries',
<a name="l00107"></a>00107                         '/([^aeiouy]|qu)ies$/i' =&gt; '\1y',
<a name="l00108"></a>00108                         '/([lr])ves$/i' =&gt; '\1f',
<a name="l00109"></a>00109                         '/(tive)s$/i' =&gt; <span class="charliteral">'\1'</span>,
<a name="l00110"></a>00110                         '/(hive)s$/i' =&gt; <span class="charliteral">'\1'</span>,
<a name="l00111"></a>00111                         '/(drive)s$/i' =&gt; <span class="charliteral">'\1'</span>,
<a name="l00112"></a>00112                         '/([^fo])ves$/i' =&gt; '\1fe',
<a name="l00113"></a>00113                         '/(^analy)ses$/i' =&gt; '\1sis',
<a name="l00114"></a>00114                         '/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i' =&gt; '\1\2sis',
<a name="l00115"></a>00115                         '/([ti])a$/i' =&gt; '\1um',
<a name="l00116"></a>00116                         '/(p)eople$/i' =&gt; '\1\2erson',
<a name="l00117"></a>00117                         '/(m)en$/i' =&gt; '\1an',
<a name="l00118"></a>00118                         '/(c)hildren$/i' =&gt; '\1\2hild',
<a name="l00119"></a>00119                         '/(n)ews$/i' =&gt; '\1\2ews',
<a name="l00120"></a>00120                         '/eaus$/' =&gt; 'eau',
<a name="l00121"></a>00121                         '/^(.*us)$/' =&gt; '\\1',
<a name="l00122"></a>00122                         '/s$/i' =&gt; ''
<a name="l00123"></a>00123                 ),
<a name="l00124"></a>00124                 'uninflected' =&gt; array(
<a name="l00125"></a>00125                         '.*[nrlm]ese', '.*deer', '.*fish', '.*measles', '.*ois', '.*pox', '.*sheep', '.*ss'
<a name="l00126"></a>00126                 ),
<a name="l00127"></a>00127                 'irregular' =&gt; array(
<a name="l00128"></a>00128                         'waves' =&gt; 'wave'
<a name="l00129"></a>00129                 )
<a name="l00130"></a>00130         );
<a name="l00131"></a>00131  
<a name="l00138"></a><a class="code" href="classMOC__Inflector.html#ddd30d269662bf70f4b101e4c9727a1c">00138</a>         <span class="keyword">protected</span> <span class="keyword">static</span> <a class="code" href="classMOC__Inflector.html#ddd30d269662bf70f4b101e4c9727a1c">$_uninflected</a> = array(
<a name="l00139"></a>00139                 'Amoyese', 'bison', 'Borghese', 'bream', 'breeches', 'britches', 'buffalo', 'cantus',
<a name="l00140"></a>00140                 'carp', 'chassis', 'clippers', 'cod', 'coitus', 'Congoese', 'contretemps', 'corps',
<a name="l00141"></a>00141                 'debris', 'diabetes', 'djinn', 'eland', 'elk', 'equipment', 'Faroese', 'flounder',
<a name="l00142"></a>00142                 'Foochowese', 'gallows', 'Genevese', 'Genoese', 'Gilbertese', 'graffiti',
<a name="l00143"></a>00143                 'headquarters', 'herpes', 'hijinks', 'Hottentotese', 'information', 'innings',
<a name="l00144"></a>00144                 'jackanapes', 'Kiplingese', 'Kongoese', 'Lucchese', 'mackerel', 'Maltese', 'media',
<a name="l00145"></a>00145                 'mews', 'moose', 'mumps', 'Nankingese', 'news', 'nexus', 'Niasese',
<a name="l00146"></a>00146                 'Pekingese', 'Piedmontese', 'pincers', 'Pistoiese', 'pliers', 'Portuguese',
<a name="l00147"></a>00147                 'proceedings', 'rabies', 'rice', 'rhinoceros', 'salmon', 'Sarawakese', 'scissors',
<a name="l00148"></a>00148                 'sea[- ]bass', 'series', 'Shavese', 'shears', 'siemens', 'species', 'swine', 'testes',
<a name="l00149"></a>00149                 'trousers', 'trout<span class="charliteral">','</span>tuna', 'Vermontese', 'Wenchowese', 'whiting', 'wildebeest',
<a name="l00150"></a>00150                 'Yengeese'
<a name="l00151"></a>00151         );
<a name="l00152"></a>00152  
<a name="l00159"></a><a class="code" href="classMOC__Inflector.html#c5b2c10d035b41cf31cb0b1798a08d8e">00159</a>         <span class="keyword">protected</span> <span class="keyword">static</span> <a class="code" href="classMOC__Inflector.html#c5b2c10d035b41cf31cb0b1798a08d8e">$_pluralized</a> = array();
<a name="l00160"></a>00160  
<a name="l00167"></a><a class="code" href="classMOC__Inflector.html#7d5ee7f875b3e66d5f6f2a19e20ca29b">00167</a>         <span class="keyword">protected</span> <span class="keyword">static</span> <a class="code" href="classMOC__Inflector.html#7d5ee7f875b3e66d5f6f2a19e20ca29b">$_singularized</a> = array();
<a name="l00168"></a>00168  
<a name="l00175"></a><a class="code" href="classMOC__Inflector.html#2c9b997784f20b6f0bb90220ecca7edf">00175</a>         <span class="keyword">protected</span> <span class="keyword">static</span> <a class="code" href="classMOC__Inflector.html#2c9b997784f20b6f0bb90220ecca7edf">$_underscored</a> = array();
<a name="l00176"></a>00176  
<a name="l00183"></a><a class="code" href="classMOC__Inflector.html#803bb741bdbd3dca14dd72db77626c93">00183</a>         <span class="keyword">protected</span> <span class="keyword">static</span> <a class="code" href="classMOC__Inflector.html#803bb741bdbd3dca14dd72db77626c93">$_camelize</a> = array();
<a name="l00184"></a>00184  
<a name="l00191"></a><a class="code" href="classMOC__Inflector.html#bf8cc870ff6b1e4f6d1c0d80b7964479">00191</a>         <span class="keyword">protected</span> <span class="keyword">static</span> <a class="code" href="classMOC__Inflector.html#bf8cc870ff6b1e4f6d1c0d80b7964479">$_classify</a> = array();
<a name="l00192"></a>00192  
<a name="l00199"></a><a class="code" href="classMOC__Inflector.html#b6adcbb0020ef2d2430d708037972b58">00199</a>         <span class="keyword">protected</span> <span class="keyword">static</span> <a class="code" href="classMOC__Inflector.html#b6adcbb0020ef2d2430d708037972b58">$_tableize</a> = array();
<a name="l00200"></a>00200  
<a name="l00207"></a><a class="code" href="classMOC__Inflector.html#f4293c913431250df78ba4f85421d070">00207</a>         <span class="keyword">protected</span> <span class="keyword">static</span> <a class="code" href="classMOC__Inflector.html#f4293c913431250df78ba4f85421d070">$_humanize</a> = array();
<a name="l00208"></a>00208  
<a name="l00224"></a><a class="code" href="classMOC__Inflector.html#d1db8ac1841872b873e1366225adee69">00224</a>         <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="classMOC__Inflector.html#d1db8ac1841872b873e1366225adee69">rules</a>($type, $rules = array()) {
<a name="l00225"></a>00225                 $type = <span class="charliteral">'_'</span>.$type;
<a name="l00226"></a>00226  
<a name="l00227"></a>00227                 foreach ($rules as $rule =&gt; $pattern) {
<a name="l00228"></a>00228                         <span class="keywordflow">if</span> (is_array($pattern)) {
<a name="l00229"></a>00229                           self::$type[$rule] = array_merge($pattern, self::$type[$rule]);
<a name="l00230"></a>00230                           unset($rules[$rule], self::$type['cache' . ucfirst($rule)], self::$type['merged'][$rule]);
<a name="l00231"></a>00231                         }
<a name="l00232"></a>00232                 }
<a name="l00233"></a>00233                 self::$type['<a class="code" href="classMOC__Inflector.html#d1db8ac1841872b873e1366225adee69">rules</a>'] = array_merge($rules, self::$type['<a class="code" href="classMOC__Inflector.html#d1db8ac1841872b873e1366225adee69">rules</a>']);
<a name="l00234"></a>00234  
<a name="l00235"></a>00235         }
<a name="l00236"></a>00236  
<a name="l00245"></a><a class="code" href="classMOC__Inflector.html#d9b92b3848babbf89f043ca2fae7c73c">00245</a>         <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="classMOC__Inflector.html#d9b92b3848babbf89f043ca2fae7c73c">pluralize</a>($word) {
<a name="l00246"></a>00246                 <span class="keywordflow">if</span> (isset(self::$_pluralized[$word])) {
<a name="l00247"></a>00247                         <span class="keywordflow">return</span> self::$_pluralized[$word];
<a name="l00248"></a>00248                 }
<a name="l00249"></a>00249  
<a name="l00250"></a>00250                 <span class="keywordflow">if</span> (!isset(self::$_plural['merged']['irregular'])) {
<a name="l00251"></a>00251                         self::$_plural['merged']['irregular'] = self::$_plural['irregular'];
<a name="l00252"></a>00252                 }
<a name="l00253"></a>00253  
<a name="l00254"></a>00254                 <span class="keywordflow">if</span> (!isset(self::$plural['merged']['uninflected'])) {
<a name="l00255"></a>00255                         self::$_plural['merged']['uninflected'] = array_merge(self::$_plural['uninflected'], self::$_uninflected);
<a name="l00256"></a>00256                 }
<a name="l00257"></a>00257  
<a name="l00258"></a>00258                 <span class="keywordflow">if</span> (!isset(self::$_plural['cacheUninflected']) || !isset(self::$_plural['cacheIrregular'])) {
<a name="l00259"></a>00259                         self::$_plural['cacheUninflected'] = '(?:' . join( <span class="charliteral">'|'</span>, self::$_plural['merged']['uninflected']) . <span class="charliteral">')'</span>;
<a name="l00260"></a>00260                         self::$_plural['cacheIrregular'] = '(?:' . join( <span class="charliteral">'|'</span>, array_keys(self::$_plural['merged']['irregular'])) . <span class="charliteral">')'</span>;
<a name="l00261"></a>00261                 }
<a name="l00262"></a>00262  
<a name="l00263"></a>00263                 <span class="keywordflow">if</span> (preg_match('/(.*)\\b(' . self::$_plural['cacheIrregular'] . ')$/i', $word, $regs)) {
<a name="l00264"></a>00264                         self::$_pluralized[$word] = $regs[1] . substr($word, 0, 1) . substr(self::$_plural['merged']['irregular'][strtolower($regs[2])], 1);
<a name="l00265"></a>00265                         <span class="keywordflow">return</span> self::$_pluralized[$word];
<a name="l00266"></a>00266                 }
<a name="l00267"></a>00267  
<a name="l00268"></a>00268                 <span class="keywordflow">if</span> (preg_match('/^(' . self::$_plural['cacheUninflected'] . ')$/i', $word, $regs)) {
<a name="l00269"></a>00269                         self::$_pluralized[$word] = $word;
<a name="l00270"></a>00270                         <span class="keywordflow">return</span> $word;
<a name="l00271"></a>00271                 }
<a name="l00272"></a>00272  
<a name="l00273"></a>00273                 foreach (self::$_plural['<a class="code" href="classMOC__Inflector.html#d1db8ac1841872b873e1366225adee69">rules</a>'] as $rule =&gt; $replacement) {
<a name="l00274"></a>00274                         <span class="keywordflow">if</span> (preg_match($rule, $word)) {
<a name="l00275"></a>00275                                 self::$_pluralized[$word] = preg_replace($rule, $replacement, $word);
<a name="l00276"></a>00276                                 <span class="keywordflow">return</span> self::$_pluralized[$word];
<a name="l00277"></a>00277                         }
<a name="l00278"></a>00278                 }
<a name="l00279"></a>00279         }
<a name="l00280"></a>00280  
<a name="l00289"></a><a class="code" href="classMOC__Inflector.html#f88e1e4f10c956369ec05cebb45308cb">00289</a>         <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="classMOC__Inflector.html#f88e1e4f10c956369ec05cebb45308cb">singularize</a>($word) {
<a name="l00290"></a>00290                 <span class="keywordflow">if</span> (isset(self::$_singularized[$word])) {
<a name="l00291"></a>00291                         <span class="keywordflow">return</span> self::$_singularized[$word];
<a name="l00292"></a>00292                 }
<a name="l00293"></a>00293  
<a name="l00294"></a>00294                 <span class="keywordflow">if</span> (!isset(self::$_singular['merged']['uninflected'])) {
<a name="l00295"></a>00295                         self::$_singular['merged']['uninflected'] = array_merge(self::$_singular['uninflected'], self::$_uninflected);
<a name="l00296"></a>00296                 }
<a name="l00297"></a>00297  
<a name="l00298"></a>00298                 <span class="keywordflow">if</span> (!isset(self::$_singular['merged']['irregular'])) {
<a name="l00299"></a>00299                         self::$_singular['merged']['irregular'] = array_merge(self::$_singular['irregular'], array_flip(self::$_plural['irregular']));
<a name="l00300"></a>00300                 }
<a name="l00301"></a>00301  
<a name="l00302"></a>00302                 <span class="keywordflow">if</span> (!isset(self::$_singular['cacheUninflected']) || !isset(self::$_singular['cacheIrregular'])) {
<a name="l00303"></a>00303                         self::$_singular['cacheUninflected'] = '(?:' . join( <span class="charliteral">'|'</span>, self::$_singular['merged']['uninflected']) . <span class="charliteral">')'</span>;
<a name="l00304"></a>00304                         self::$_singular['cacheIrregular'] = '(?:' . join( <span class="charliteral">'|'</span>, array_keys(self::$_singular['merged']['irregular'])) . <span class="charliteral">')'</span>;
<a name="l00305"></a>00305                 }
<a name="l00306"></a>00306  
<a name="l00307"></a>00307                 <span class="keywordflow">if</span> (preg_match('/(.*)\\b(' . self::$_singular['cacheIrregular'] . ')$/i', $word, $regs)) {
<a name="l00308"></a>00308                         self::$_singularized[$word] = $regs[1] . substr($word, 0, 1) . substr(self::$_singular['merged']['irregular'][strtolower($regs[2])], 1);
<a name="l00309"></a>00309                         <span class="keywordflow">return</span> self::$_singularized[$word];
<a name="l00310"></a>00310                 }
<a name="l00311"></a>00311  
<a name="l00312"></a>00312                 <span class="keywordflow">if</span> (preg_match('/^(' . self::$_singular['cacheUninflected'] . ')$/i', $word, $regs)) {
<a name="l00313"></a>00313                         self::$_singularized[$word] = $word;
<a name="l00314"></a>00314                         <span class="keywordflow">return</span> $word;
<a name="l00315"></a>00315                 }
<a name="l00316"></a>00316  
<a name="l00317"></a>00317                 foreach (self::$_singular['<a class="code" href="classMOC__Inflector.html#d1db8ac1841872b873e1366225adee69">rules</a>'] as $rule =&gt; $replacement) {
<a name="l00318"></a>00318                         <span class="keywordflow">if</span> (preg_match($rule, $word)) {
<a name="l00319"></a>00319                                 self::$_singularized[$word] = preg_replace($rule, $replacement, $word);
<a name="l00320"></a>00320                                 <span class="keywordflow">return</span> self::$_singularized[$word];
<a name="l00321"></a>00321                         }
<a name="l00322"></a>00322                 }
<a name="l00323"></a>00323                 self::$_singularized[$word] = $word;
<a name="l00324"></a>00324                 <span class="keywordflow">return</span> $word;
<a name="l00325"></a>00325         }
<a name="l00326"></a>00326  
<a name="l00335"></a><a class="code" href="classMOC__Inflector.html#8fef147894f914732c009e46981e1eff">00335</a>         <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="classMOC__Inflector.html#8fef147894f914732c009e46981e1eff">camelize</a>($lowerCaseAndUnderscoredWord) {
<a name="l00336"></a>00336                 <span class="keywordflow">if</span> (!isset(self::$_camelize[$lowerCaseAndUnderscoredWord])) {
<a name="l00337"></a>00337                         self::$_camelize[$lowerCaseAndUnderscoredWord] = str_replace(<span class="stringliteral">" "</span>, <span class="stringliteral">""</span>, ucwords(str_replace(<span class="stringliteral">"_"</span>, <span class="stringliteral">" "</span>, $lowerCaseAndUnderscoredWord)));
<a name="l00338"></a>00338                 }
<a name="l00339"></a>00339                 <span class="keywordflow">return</span> self::$_camelize[$lowerCaseAndUnderscoredWord];
<a name="l00340"></a>00340         }
<a name="l00341"></a>00341  
<a name="l00350"></a><a class="code" href="classMOC__Inflector.html#ce3fa63ceeb7f11774e87e4500ca1ec5">00350</a>         <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="classMOC__Inflector.html#ce3fa63ceeb7f11774e87e4500ca1ec5">underscore</a>($camelCasedWord) {
<a name="l00351"></a>00351                 <span class="keywordflow">if</span> (!isset(self::$_underscored[$camelCasedWord])) {
<a name="l00352"></a>00352                         self::$_underscored[$camelCasedWord] = strtolower(preg_replace('/(?&lt;=\\w)([A-Z])/', '_\\1', $camelCasedWord));
<a name="l00353"></a>00353                 }
<a name="l00354"></a>00354                 <span class="keywordflow">return</span> self::$_underscored[$camelCasedWord];
<a name="l00355"></a>00355         }
<a name="l00356"></a>00356  
<a name="l00366"></a><a class="code" href="classMOC__Inflector.html#ca015513f59545453c06d2f2b7ebd162">00366</a>         <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="classMOC__Inflector.html#ca015513f59545453c06d2f2b7ebd162">humanize</a>($lowerCaseAndUnderscoredWord) {
<a name="l00367"></a>00367                 <span class="keywordflow">if</span> (!isset(self::$_humanize[$lowerCaseAndUnderscoredWord])) {
<a name="l00368"></a>00368                         self::$_humanize[$lowerCaseAndUnderscoredWord] = ucwords(str_replace(<span class="stringliteral">"_"</span>, <span class="stringliteral">" "</span>, $lowerCaseAndUnderscoredWord));
<a name="l00369"></a>00369                 }
<a name="l00370"></a>00370                 <span class="keywordflow">return</span> self::$_humanize[$lowerCaseAndUnderscoredWord];
<a name="l00371"></a>00371         }
<a name="l00372"></a>00372  
<a name="l00381"></a><a class="code" href="classMOC__Inflector.html#27d332e8fd71a21532665917bf31d68f">00381</a>         <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="classMOC__Inflector.html#27d332e8fd71a21532665917bf31d68f">tableize</a>($className) {
<a name="l00382"></a>00382                 <span class="keywordflow">if</span> (!isset(self::$_tableize[$className])) {
<a name="l00383"></a>00383                         self::$_tableize[$className] = <a class="code" href="classMOC__Inflector.html#d9b92b3848babbf89f043ca2fae7c73c">MOC_Inflector::pluralize</a>(<a class="code" href="classMOC__Inflector.html#ce3fa63ceeb7f11774e87e4500ca1ec5">MOC_Inflector::underscore</a>($className));
<a name="l00384"></a>00384                 }
<a name="l00385"></a>00385                 <span class="keywordflow">return</span> self::$_tableize[$className];
<a name="l00386"></a>00386         }
<a name="l00387"></a>00387  
<a name="l00396"></a><a class="code" href="classMOC__Inflector.html#b1b21dde4565dd872b545de33a43027b">00396</a>         <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="classMOC__Inflector.html#b1b21dde4565dd872b545de33a43027b">classify</a>($tableName) {   
<a name="l00397"></a>00397                 <span class="keywordflow">if</span> (!isset(self::$_classify[$tableName])) {
<a name="l00398"></a>00398                         self::$_classify[$tableName] = <a class="code" href="classMOC__Inflector.html#8fef147894f914732c009e46981e1eff">MOC_Inflector::camelize</a>(<a class="code" href="classMOC__Inflector.html#f88e1e4f10c956369ec05cebb45308cb">MOC_Inflector::singularize</a>($tableName));
<a name="l00399"></a>00399                 }
<a name="l00400"></a>00400                 <span class="keywordflow">return</span> self::$_classify[$tableName];
<a name="l00401"></a>00401         }
<a name="l00402"></a>00402  
<a name="l00411"></a><a class="code" href="classMOC__Inflector.html#d1ddbc943f45ed8c6772ea559c036acd">00411</a>         <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="classMOC__Inflector.html#d1ddbc943f45ed8c6772ea559c036acd">variable</a>($string) {
<a name="l00412"></a>00412                 <span class="keywordflow">if</span> (!isset(self::$_variable[$string])) {
<a name="l00413"></a>00413                         $string = <a class="code" href="classMOC__Inflector.html#8fef147894f914732c009e46981e1eff">MOC_Inflector::camelize</a>(<a class="code" href="classMOC__Inflector.html#ce3fa63ceeb7f11774e87e4500ca1ec5">MOC_Inflector::underscore</a>($string));
<a name="l00414"></a>00414                         $replace = strtolower(substr($string, 0, 1));
<a name="l00415"></a>00415                         self::$_variable[$string] = preg_replace('/\\w/', $replace, $string, 1);
<a name="l00416"></a>00416                 }
<a name="l00417"></a>00417                 <span class="keywordflow">return</span> self::$_variable[$string];
<a name="l00418"></a>00418         }
<a name="l00419"></a>00419  
<a name="l00431"></a><a class="code" href="classMOC__Inflector.html#b2590fd95063ae64be91169bb33db224">00431</a>         <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="classMOC__Inflector.html#b2590fd95063ae64be91169bb33db224">slug</a>($string, $replacement = <span class="charliteral">'_'</span>, $map = array()) {
<a name="l00432"></a>00432                 <span class="keywordflow">if</span> (is_array($replacement)) {
<a name="l00433"></a>00433                         $map = $replacement;
<a name="l00434"></a>00434                         $replacement = <span class="charliteral">'_'</span>;
<a name="l00435"></a>00435                 }
<a name="l00436"></a>00436  
<a name="l00437"></a>00437                 $quotedReplacement = preg_quote($replacement, <span class="charliteral">'/'</span>);
<a name="l00438"></a>00438  
<a name="l00439"></a>00439                 $default = array(
<a name="l00440"></a>00440                         '/à|á|å|â/' =&gt; <span class="charliteral">'a'</span>,
<a name="l00441"></a>00441                         '/è|é|ê|ẽ|ë/' =&gt; <span class="charliteral">'e'</span>,
<a name="l00442"></a>00442                         '/ì|í|î/' =&gt; <span class="charliteral">'i'</span>,
<a name="l00443"></a>00443                         '/ò|ó|ô|ø/' =&gt; <span class="charliteral">'o'</span>,
<a name="l00444"></a>00444                         '/ù|ú|ů|û/' =&gt; <span class="charliteral">'u'</span>,
<a name="l00445"></a>00445                         '/ç/' =&gt; <span class="charliteral">'c'</span>,
<a name="l00446"></a>00446                         '/ñ/' =&gt; <span class="charliteral">'n'</span>,
<a name="l00447"></a>00447                         '/ä|æ/' =&gt; 'ae',
<a name="l00448"></a>00448                         '/ö/' =&gt; 'oe',
<a name="l00449"></a>00449                         '/ü/' =&gt; 'ue',
<a name="l00450"></a>00450                         '/Ä/' =&gt; 'Ae',
<a name="l00451"></a>00451                         '/Ü/' =&gt; 'Ue',
<a name="l00452"></a>00452                         '/Ö/' =&gt; 'Oe',
<a name="l00453"></a>00453                         '/ß/' =&gt; 'ss',
<a name="l00454"></a>00454                         '/[^\s\p{Ll}\p{Lm}\p{Lo}\p{Lt}\p{Lu}\p{Nd}]/mu' =&gt; <span class="charliteral">' '</span>,
<a name="l00455"></a>00455                         '/\\s+/' =&gt; $replacement,
<a name="l00456"></a>00456                         sprintf('/^[%s]+|[%s]+$/', $quotedReplacement, $quotedReplacement) =&gt; '',
<a name="l00457"></a>00457                 );
<a name="l00458"></a>00458  
<a name="l00459"></a>00459                 $map = array_merge($default, $map);
<a name="l00460"></a>00460                 <span class="keywordflow">return</span> preg_replace(array_keys($map), array_values($map), $string);
<a name="l00461"></a>00461         }
<a name="l00462"></a>00462 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Jan 21 14:53:13 2010 for moc_base by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
